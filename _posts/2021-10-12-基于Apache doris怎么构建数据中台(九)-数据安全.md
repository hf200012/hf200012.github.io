---
layout: post
title: "基于Apache doris怎么构建数据中台(九)-数据安全"
date: 2021-10-12
description: "基于Apache doris怎么构建数据中台(九)-数据安全"
tag: 数据中台
---
# 基于Apache doris怎么构建数据中台(九)-数据安全

数据安全有对立的两方面的含义：一是数据本身的安全，主要是指采用现代密码算法对数据进行主动保护，如数据保密、数据完整性、双向强身份认证等，二是数据防护的安全，主要是采用现代信息存储手段对数据进行主动防护，如通过磁盘阵列、数据备份、异地容灾等手段保证数据的安全，数据安全是一种主动的包含措施，数据本身的安全必须基于可靠的加密算法与安全体系，主要是有对称算法与公开密钥密码体系两种，

 数据处理的安全是指如何有效的防止数据在录入、处理、统计或打印中由于硬件故障、断电、死机、人为的误操作、程序缺陷、病毒或黑客等造成的数据库损坏或数据丢失现象，某些敏感或保密的数据可能不具备资格的人员或操作员阅读，而造成数据泄密等后果。

 而数据存储的安全是指数据库在系统运行之外的可读性。一旦数据库被盗，即使没有原来的系统程序，照样可以另外编写程序对盗取的数据库进行查看或修改。从这个角度说，不加密的数据库是不安全的，容易造成商业泄密，所以便衍生出数据防泄密这一概念，这就涉及了计算机网络通信的保密、安全及软件保护等问题。

## 1.数据安全级别

**在数据安全级别上我们参照了《**信息安全技术网络支付服务数据安全指南》将数据分为四个级别

![图片](/images/anquan1.png)

## 2.数据安全策略

![图片](/images/anquan2.png)



 我们在设计数据中台同时在数据安全上主要集中在以下几个方面：

1. 数据不会丢失（数据备份、数据恢复）
2. 数据脱敏：对敏感数据对外提供服务的时候要进行脱敏处理
3. 数据加解密：对高度敏感数据为了防止被直接从库表访问或者拖库问题，要对敏感数据在存储的时候就要进行加密处理，使用的时候进行解密，比如：客户名称，手机号、身份证号码、营业执照等，这类数据的访问必须通过接口，使用私钥解密的方式才能查看到真实数据，这类数据访问接口是进行了严格的权限控制，及使用追溯
4. 敏感数据使用账号及授权情况分析
5. 用户对使用数据的日常审计
6. 数据水印技术：数据水印技术是为了保持对分发后的数据的追踪，在数据泄露行为发生后，对造成数据泄露的源头可进行回溯。在分发数据中掺杂不影响运算结果的水印数据，水印中记录分发信息，当拿到泄密数据的样本，可追溯数据泄露源
7. 数据日常稽核：日常数据巡检（表名规范，数据规范、数据量、数据表数量、接口数量、使用情况）
8. 数据隔离

- 在所有数据中要添加数据所属（企业ID，部门编号等）信息
- 根据数据访问人员所属组织，判定改人员是否有访问改数据的权限
- 具体这个数据服务接口，或者嵌入到业务系统的报表访问权限，交给GAIA平台的资源授权统一管控，这块我们不做管控，我们只做到数据隔离就行，保证A企业的人不能访问B企业的数据
- 可以管控到列级别，可以给不同角色授权可以看到的表中哪些列，主要是为了保护敏感数据的访问，比如手机号，身份证，企业营业执照，企业经营的相关数据等
- 异常行为分析：
- 一段时间内重复查询数十次至几百次
- 一个号码一天内被查询10次以上或者一个月被查询数百次
- 单次超大量查询，每次查询数据量超十万以上
- 长时间不使用的账号，登录一下查询敏感信息
- 同一账号被不同人员使用，同时登录或者在不同地方IP登录
- 执行数据删除或修改操作

**数据窃取场景，我们通过以下手段**：

- 单日最大执行次数限制
- 单日最大返回行数限制
- 单笔查询返回记录数限制

**数据查询过程中安全，通过以下手段**：

- 针对不同安全级别的数据设定不同的数据访问权限控制
- 单笔查询执行时间限制
- 大表全表扫描执行限制
- 不同安全级别的表单次查询最大返回记录数
